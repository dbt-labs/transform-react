"""
Base Query object exposed by GraphQL.

Each field defined below is accessible by the API, by calling the equivalent resolver.
"""
type Query {
  auth0Profile(auth0Id: String!): Auth0Profile
  mqlServerUrl: String
  latestMqlServer: ServiceRelease
  latestAvaticaServer: ServiceRelease
  myOrganization: Organization
  myUser: User
  allFeatures(searchStr: String, searchColumns: [FeatureStrColumns], pageNumber: Int, pageSize: Int, orderBy: FeatureOrderBy, desc: Boolean): [Feature]
  allOrganizations(searchStr: String, searchColumns: [OrganizationStrColumns], pageNumber: Int, pageSize: Int, orderBy: OrganizationOrderBy, desc: Boolean): [Organization]
  totalFeatures: Int
  totalOrganizations: Int
  organizationTest(id: ID!): Organization
  featureTest(id: ID!): Feature
  allMetricFilters: GenericScalar
  boom(raise_: Boolean): Boolean
  transformConfig: TransformConfig
  emailCanSignUp(email: String!): Boolean
}

"""A wrapper for the response we get from Auth0's user profile API"""
type Auth0Profile {
  picture: String
  lastIp: String
  lastLogin: DateTime
  loginsCount: Int
  blocked: Boolean
  emailVerified: Boolean
}

"""
The `DateTime` scalar type represents a DateTime
value as specified by
[iso8601](https://en.wikipedia.org/wiki/ISO_8601).
"""
scalar DateTime

"""
This is the externally-facing Graphene object representing the available MQL server download.

TODO: There's likely a simple way to merge these two objects together
"""
type ServiceRelease {
  serviceName: String
  version: String
  downloadUrl: String
  versionHash: String
}

type Organization {
  id: ID!
  name: String!
  logoUrl: String
  primaryConfigRepo: String
  primaryConfigBranch: String
  sourceControlUrl: String
  createdAt: DateTime
  updatedAt: DateTime
  deactivatedAt: DateTime
  mqlServerLogs: String
  isHosted: Boolean!
  type: OrgType
  users(activeOnly: Boolean, searchStr: String, searchColumns: [UserStrColumns], pageNumber: Int, pageSize: Int, orderBy: UserOrderBy, desc: Boolean): [User]
  mqlServers(searchStr: String, searchColumns: [OrgMqlServerStrColumns], pageNumber: Int, pageSize: Int, orderBy: OrgMqlServerOrderBy, desc: Boolean): [OrgMqlServer]
  models(id: ID): [Model]
  orgMetrics: [OrgMetric]
  mqlHeartbeats: [MqlHeartbeat]
  currentModel: [Model]
  teams(searchStr: String, searchColumns: [TeamStrColumns], pageNumber: Int, pageSize: Int, orderBy: TeamOrderBy, desc: Boolean): [Team]
  apiKeys: [ApiKey]
  metricViews: [MetricView]
  savedQueries(searchStr: String, searchColumns: [SavedQueryStrColumns], pageNumber: Int, pageSize: Int, orderBy: SavedQueryOrderBy, desc: Boolean): [SavedQuery]
  teamViews: [TeamView]
  dashboards: [Dashboard]
  metricCollections(searchStr: String, searchColumns: [MetricCollectionStrColumns], pageNumber: Int, pageSize: Int, orderBy: MetricCollectionOrderBy, desc: Boolean): [MetricCollection]
  questions(searchStr: String, searchColumns: [QuestionStrColumns], pageNumber: Int, pageSize: Int, orderBy: QuestionOrderBy, desc: Boolean): [Question]
  question(id: ID!): Question
  annotations(searchStr: String, searchColumns: [AnnotationStrColumns], pageNumber: Int, pageSize: Int, orderBy: AnnotationOrderBy, desc: Boolean): [Annotation]
  recentQuestions(searchStr: String, searchColumns: [QuestionStrColumns], pageNumber: Int, pageSize: Int, orderBy: QuestionOrderBy, desc: Boolean): [Question]
  recentAnnotations(searchStr: String, searchColumns: [AnnotationStrColumns], pageNumber: Int, pageSize: Int, orderBy: AnnotationOrderBy, desc: Boolean): [Annotation]
  totalQuestions: Int
  totalAnnotations: Int
  metrics(names: [String], tiers: [MetricTier], types: [MetricType], searchStr: String, searchColumns: [MetricVersionStrColumns], pageNumber: Int, pageSize: Int, orderBy: MetricVersionOrderBy, desc: Boolean): [Metric]
  totalMetrics(searchStr: String, searchColumns: [MetricVersionStrColumns], names: [String], tiers: [MetricTier], types: [MetricType]): Int
  latestMqlHeartbeat: MqlHeartbeat
  totalUsers: Int
  totalTeams: Int
  mqlServer(id: ID!): OrgMqlServer
  totalMqlServers: Int
  metric(name: String!): Metric
  team(slug: String!): Team
  dashboard(id: ID!): Dashboard
  savedQuery(id: ID!): SavedQuery
  metricCollection(slug: String!): MetricCollection
  totalMetricCollections: Int
  totalSavedQueries: Int
  totalActiveFeatures: Int
  requireMfa: Boolean
  allowMfaRememberBrowser: Boolean
  mqlServerUrl: String
  allowedEmailDomains: [String]
  tierTooltips(tiers: [Int]!): GenericScalar
  activeFeatures: [Feature]
}

"""An enumeration."""
enum OrgType {
  PAID
  TRIAL
  INTERNAL
  TEST
}

type User {
  id: ID!
  organizationId: Int!
  auth0Id: String!
  userName: String!
  email: String!
  createdAt: DateTime
  updatedAt: DateTime
  deactivatedAt: DateTime
  avatarUrl: String
  primaryDashboardId: Int
  roles: [UserRole]
  prefs: [UserPref]
  activeUserRoles: [UserRole]
  teams(isAdminOnly: Boolean, searchStr: String, searchColumns: [TeamStrColumns], pageNumber: Int, pageSize: Int, orderBy: TeamOrderBy, desc: Boolean): [Team]
  teamMemberships: [TeamMember]
  dashboards: [Dashboard]
  primaryDashboard: Dashboard
  apiKeys(activeOnly: Boolean, searchStr: String, searchColumns: [ApiKeyStrColumns], pageNumber: Int, pageSize: Int, orderBy: ApiKeyOrderBy, desc: Boolean): [ApiKey]
  savedQueries(searchStr: String, searchColumns: [SavedQueryStrColumns], pageNumber: Int, pageSize: Int, orderBy: SavedQueryOrderBy, desc: Boolean): [SavedQuery]
  organization: Organization
  teamViews: [TeamView]
  metricCollections(searchStr: String, searchColumns: [MetricCollectionStrColumns], pageNumber: Int, pageSize: Int, orderBy: MetricCollectionOrderBy, desc: Boolean): [MetricCollection]
  mqlServerUrl: String
  activeRoles: [String]
  isAdmin: Boolean
  isOrgAdmin: Boolean
  auth0Profile: Auth0Profile
  totalTeams: Int
  totalApiKeys: Int
  totalSavedQueries: Int
  totalViewedMetrics: Int
  totalMetricCollections: Int
  viewedTeams(searchStr: String, searchColumns: [TeamStrColumns], pageNumber: Int, pageSize: Int, orderBy: TeamOrderBy, desc: Boolean): [Team]
  totalViewedTeams: Int
  viewedMetricCollections(searchStr: String, searchColumns: [MetricCollectionStrColumns], pageNumber: Int, pageSize: Int, orderBy: MetricCollectionOrderBy, desc: Boolean): [MetricCollection]
  totalViewedMetricCollections: Int
  totalActiveFeatures: Int
  hasAcceptedLatestTermsOfService: Boolean
  viewedMetrics(searchStr: String, searchColumns: [MetricVersionStrColumns], pageNumber: Int, pageSize: Int, orderBy: MetricVersionOrderBy, desc: Boolean): [Metric]
  newMetrics(searchStr: String, searchColumns: [MetricVersionStrColumns], pageNumber: Int, pageSize: Int, orderBy: MetricVersionOrderBy, desc: Boolean): [Metric]
  activeFeatures: [Feature]
}

type UserRole {
  id: ID!
  organizationId: Int!
  userId: Int!
  role: String!
  createdAt: DateTime
  updatedAt: DateTime
  removedAt: DateTime
  organization: Organization
  user: User
}

type UserPref {
  id: ID!
  organizationId: Int!
  userId: Int!
  prefKey: String!
  prefValue: String!
  createdAt: DateTime
  updatedAt: DateTime
  organization: Organization
  user: User
}

type Team {
  id: ID!
  organizationId: Int!
  name: String!
  createdBy: Int
  slug: String!
  theme: String
  primaryDashboardId: Int
  featuredMetricCollectionId: Int
  createdAt: DateTime
  updatedAt: DateTime
  deactivatedAt: DateTime
  description: String
  createdByUser: User
  organization: Organization
  members(pageNumber: Int, pageSize: Int, orderBy: TeamMemberOrderBy, desc: Boolean): [TeamMember]
  adminMembers: [TeamMember]
  memberUsers: [User]
  dashboards: [Dashboard]
  primaryDashboard: Dashboard
  featuredMetricCollection: MetricCollection
  savedQueries(searchStr: String, searchColumns: [SavedQueryStrColumns], pageNumber: Int, pageSize: Int, orderBy: SavedQueryOrderBy, desc: Boolean): [SavedQuery]
  views: [TeamView]
  metricCollections(searchStr: String, searchColumns: [MetricCollectionStrColumns], pageNumber: Int, pageSize: Int, orderBy: MetricCollectionOrderBy, desc: Boolean): [MetricCollection]
  teamAdminIds: [Int]
  userIsTeamAdmin: Boolean
  totalMetrics: Int
  totalSavedQueries: Int
  totalMetricCollections: Int
  totalMembers: Int
  totalRecentViews: Int
  totalRecentViewsForUser: Int
  metrics(searchStr: String, searchColumns: [MetricVersionStrColumns], pageNumber: Int, pageSize: Int, orderBy: MetricVersionOrderBy, desc: Boolean): [Metric]
}

type TeamMember {
  id: ID!
  teamId: Int!
  organizationId: Int!
  userId: Int!
  isTeamAdmin: Boolean!
  joinedAt: DateTime
  organization: Organization
  team: Team
  user: User
}

"""An enumeration."""
enum TeamMemberOrderBy {
  JOINED_AT
  TEAM_ID
  USER_ID
  IS_TEAM_ADMIN
  TeamMember_ORGANIZATION_ID
  TeamMember_ID
  User_ORGANIZATION_ID
  User_ID
  EMAIL
  UPDATED_AT
  PRIMARY_DASHBOARD_ID
  USER_NAME
  CREATED_AT
  AVATAR_URL
  DEACTIVATED_AT
  AUTH0_ID
}

type Dashboard {
  id: ID!
  title: String!
  dashboardLayout: String!
  organizationId: Int!
  createdAt: DateTime
  updatedAt: DateTime
  deletedAt: DateTime
  organization: Organization
  sections: [DashboardSection]
  user: [User]
  team: [Team]
}

type DashboardSection {
  id: ID!
  dashboardId: Int!
  dashboardSectionType: String!
  items: [DashboardItem]
  dashboard: Dashboard
}

type DashboardItem {
  id: ID!
  dashboardSectionId: Int!
  dashboardRenderableType: String!
  title: String
  subtitle: String
  userId: Int
  teamId: Int
  metricId: Int
  metricCollectionId: Int
  position: Int
  dashboardSection: DashboardSection
  metricCollection: MetricCollection
  team: Team
  user: User
}

type MetricCollection {
  id: ID!
  title: String!
  organizationId: Int!
  primaryDashboardId: Int
  createdAt: DateTime
  updatedAt: DateTime
  deletedAt: DateTime
  slug: String!
  createdBy: Int!
  ownerTeamId: Int
  description: String
  defaultEmphasis: Int
  createdByUser: User
  organization: Organization
  teamOwner: Team
  primaryDashboard: Dashboard
  views: [MetricCollectionView]
  items(pageNumber: Int, pageSize: Int, orderBy: MetricCollectionMetricOrderBy, desc: Boolean): [MetricCollectionMetric]
  collectionItems(pageNumber: Int, pageSize: Int, orderBy: MetricCollectionMetricOrderBy, desc: Boolean): [CollectionItem]
  totalItems: Int
  totalRecentViews: Int
  totalRecentViewsForUser: Int
  userCanEdit: Boolean
}

type MetricCollectionView {
  id: ID!
  metricCollectionId: Int!
  userId: Int!
  organizationId: Int!
  createdAt: DateTime!
  metricCollection: MetricCollection
  organization: Organization
  user: User
}

type MetricCollectionMetric {
  id: ID!
  createdAt: DateTime!
  updatedAt: DateTime!
  metricCollectionId: Int!
  metricId: Int
  savedQueryId: Int
  position: Int!
  emphasis: Int!
  metricCollection: MetricCollection
  orgMetric: OrgMetric
  savedQuery: SavedQuery
  metric: Metric
}

type OrgMetric {
  id: ID!
  createdAt: DateTime!
  organizationId: Int!
  name: String!
  userOwners: [MetricUserOwner]
  teamOwners: [MetricTeamOwner]
  versions: [Metric]
  metricAnnotations: [MetricAnnotation]
  organization: Organization
}

type MetricUserOwner {
  id: ID!
  organizationId: Int!
  orgMetricId: Int!
  userId: Int!
  createdAt: DateTime
  isLocked: Boolean!
  user: User
  organization: Organization
}

type MetricTeamOwner {
  id: ID!
  organizationId: Int!
  teamId: Int!
  createdTs: Int
  orgMetricId: Int!
  createdAt: DateTime
  team: Team
  organization: Organization
}

type Metric {
  metadata_: JSONString!
  id: Int
  displayName: String
  description: String
  tier: Int
  metricType: Int!
  metricId: Int!
  params: GenericScalar
  createdAt: DateTime!
  hash: String!
  organizationId: Int!
  sourceDataSourceVersions: JSONString!
  orgDataSourceId: Int
  organization: Organization
  orgMetric: OrgMetric
  model: [Model]
  userOwners: [MetricUserOwner]
  teamOwners: [MetricTeamOwner]
  views: MetricView
  questions(searchStr: String, searchColumns: [QuestionStrColumns], pageNumber: Int, pageSize: Int, orderBy: QuestionOrderBy, desc: Boolean): [Question]
  resolvedQuestions: Question
  unresolvedQuestions: Question
  metadata: GenericScalar
  totalQuestions: Int
  totalAnnotations: Int
  name: String
  valueFormat: String
  tierWithLock: LockableParameter
  displayNameWithLock: LockableParameter
  descriptionWithLock: LockableParameter
  valueFormatWithLock: LockableParameter
  latestApproval: MetricApproval
  annotations(dimensions: [GMetricAnnotationDimensionInput], startDate: Date, endDate: Date, priorities: [Priority], searchStr: String, searchColumns: [AnnotationStrColumns], pageNumber: Int, pageSize: Int, orderBy: AnnotationOrderBy, desc: Boolean): [Annotation]
  currentDescription: String
  totalRecentViews: Int
  totalRecentViewsForUser: Int
  userIsMetricOwner: Boolean
  userCanEdit: Boolean
  dataSources(searchStr: String, searchColumns: [DataSourceVersionStrColumns], pageNumber: Int, pageSize: Int, orderBy: DataSourceVersionOrderBy, desc: Boolean): [DataSourceVersion]
  totalDataSources: Int
  savedQueries(searchStr: String, searchColumns: [SavedQueryStrColumns], pageNumber: Int, pageSize: Int, orderBy: SavedQueryOrderBy, desc: Boolean): [SavedQuery]
  totalSavedQueries: Int
  totalResolvedQuestions: Int
  totalUnresolvedQuestions: Int
  ownerTeams(searchStr: String, searchColumns: [TeamStrColumns], pageNumber: Int, pageSize: Int, orderBy: TeamOrderBy, desc: Boolean): [Team]
  totalOwnerTeams: Int
  ownerUsers(searchStr: String, searchColumns: [UserStrColumns], pageNumber: Int, pageSize: Int, orderBy: UserOrderBy, desc: Boolean): [User]
  totalOwnerUsers: Int
  tierTooltip: String
  isAdditive: Boolean
}

"""
Allows use of a JSON String for input / output from the GraphQL schema.

Use of this type is *not recommended* as you lose the benefits of having a defined, static
schema (one of the key benefits of GraphQL).
"""
scalar JSONString

"""
The `GenericScalar` scalar type represents a generic
GraphQL scalar value that could be:
String, Boolean, Int, Float, List or Object.
"""
scalar GenericScalar

type Model {
  id: ID!
  organizationId: Int!
  uploaderId: Int!
  createdAt: DateTime!
  gitRepo: String!
  gitBranch: String!
  gitCommit: String!
  gitIsDirty: Boolean!
  executionContext: String
  isCurrent: Boolean!
  uploader: User
  metrics: [Metric]
  modelDataSources: [ModelDataSource]
  organization: Organization
}

type ModelDataSource {
  orgDataSourceId: ID!
  modelId: ID!
  dataSourceVersionId: ID!
  dataSourceVersion: DataSourceVersion
  model: Model
}

type DataSourceVersion {
  id: ID!
  name: String!
  description: String!
  owners: JSONString
  connection: String!
  sqlTable: String
  sqlQuery: String
  identifiers: JSONString!
  measures: GenericScalar
  dimensions: JSONString!
  dataSourceMetadata: GenericScalar
  mutability: JSONString!
  constraint: JSONString
  createdAt: DateTime!
  hash: String!
  organizationId: Int!
  organization: Organization
}

type MetricView {
  organizationId: Int!
  userId: ID!
  metricId: ID!
  createdAt: DateTime!
  organization: Organization
}

type Question {
  id: ID!
  organizationId: Int!
  authorId: Int!
  resolved: Boolean
  resolvedBy: Int
  resolvedAt: DateTime
  text: String!
  priority: String!
  notifiedAt: DateTime
  createdAt: DateTime
  updatedAt: DateTime
  metricId: Int!
  organization: Organization
  replies(searchStr: String, searchColumns: [QuestionReplyStrColumns], pageNumber: Int, pageSize: Int, orderBy: QuestionReplyOrderBy, desc: Boolean): [QuestionReply]
  orgMetric: OrgMetric
  author: User
  resolvedByUser: User
  directedToUsers: [User]
  directedToTeams: [Team]
  totalLikes: Int
  likedByCurrentUser: Boolean
  totalReplies: Int
  currentUserIsAuthor: Boolean
  metricName: String
  userCanEdit: Boolean
  metric: Metric
}

type QuestionReply {
  id: ID!
  organizationId: Int!
  questionId: Int!
  authorId: Int!
  text: String!
  createdAt: DateTime
  updatedAt: DateTime
  organization: Organization
  author: User
  question: Question
  likedByCurrentUser: Boolean
  totalLikes: Int
}

"""An enumeration."""
enum QuestionReplyStrColumns {
  TEXT
}

"""An enumeration."""
enum QuestionReplyOrderBy {
  AUTHOR_ID
  UPDATED_AT
  ORGANIZATION_ID
  CREATED_AT
  ID
  TEXT
  QUESTION_ID
}

"""An enumeration."""
enum QuestionStrColumns {
  PRIORITY
  TEXT
}

"""An enumeration."""
enum QuestionOrderBy {
  RESOLVED_BY
  AUTHOR_ID
  PRIORITY
  UPDATED_AT
  ORGANIZATION_ID
  CREATED_AT
  METRIC_ID
  RESOLVED
  RESOLVED_AT
  NOTIFIED_AT
  ID
  TEXT
}

type LockableParameter {
  isLocked: Boolean
  value: GenericScalar
}

type MetricApproval {
  id: ID!
  organizationId: Int!
  approverId: Int!
  approvedAt: DateTime
  metricId: Int!
  approver: User
  organization: Organization
}

type Annotation {
  id: ID!
  organizationId: Int!
  authorId: Int!
  title: String!
  text: String!
  expectedImpact: String!
  priority: String!
  dateStartedAt: String!
  dateEndedAt: String!
  notifiedAt: DateTime
  deletedAt: DateTime
  createdAt: DateTime
  updatedAt: DateTime
  orgMetrics: [OrgMetric]
  author: User
  organization: Organization
  metricAnnotations: [MetricAnnotation]
  userCanEdit: Boolean
  metrics: [Metric]
}

type MetricAnnotation {
  id: ID!
  organizationId: Int!
  annotationId: Int!
  metricId: Int!
  createdAt: DateTime
  updatedAt: DateTime
  organization: Organization
  annotation: Annotation
  orgMetric: OrgMetric
  dimensions: [MetricAnnotationDimension]
  metric: Metric
}

type MetricAnnotationDimension {
  id: ID!
  metricAnnotationId: Int!
  dimensionName: String!
  valueHashes: [String]
}

input GMetricAnnotationDimensionInput {
  dimensionName: String!
  valueHashes: [String]
}

"""
The `Date` scalar type represents a Date
value as specified by
[iso8601](https://en.wikipedia.org/wiki/ISO_8601).
"""
scalar Date

"""An enumeration."""
enum Priority {
  NO_PRIORITY
  LOW
  MEDIUM
  HIGH
  CRITICAL
}

"""An enumeration."""
enum AnnotationStrColumns {
  PRIORITY
  TITLE
  EXPECTED_IMPACT
  TEXT
}

"""An enumeration."""
enum AnnotationOrderBy {
  AUTHOR_ID
  PRIORITY
  UPDATED_AT
  DELETED_AT
  ORGANIZATION_ID
  CREATED_AT
  EXPECTED_IMPACT
  DATE_ENDED_AT
  NOTIFIED_AT
  TITLE
  DATE_STARTED_AT
  ID
  TEXT
}

"""An enumeration."""
enum DataSourceVersionStrColumns {
  SQL_QUERY
  DESCRIPTION
  CONNECTION
  SQL_TABLE
  NAME
  HASH
}

"""An enumeration."""
enum DataSourceVersionOrderBy {
  ORGANIZATION_ID
  NAME
  DATA_SOURCE_METADATA
  OWNERS
  CONSTRAINT
  MUTABILITY
  ID
  SQL_QUERY
  CONNECTION
  CREATED_AT
  MEASURES
  DIMENSIONS
  DESCRIPTION
  SQL_TABLE
  HASH
  IDENTIFIERS
}

type SavedQuery {
  id: ID!
  organizationId: Int!
  title: String!
  createdAt: DateTime
  updatedAt: DateTime
  deletedAt: DateTime
  createdBy: Int!
  ownerTeamId: Int
  serializedQuery: GenericScalar
  createdByUser: User
  organization: Organization
  ownerTeam: Team
  orgMetrics: [OrgMetric]
  totalMetrics: Int
  metrics(searchStr: String, searchColumns: [MetricVersionStrColumns], pageNumber: Int, pageSize: Int, orderBy: MetricVersionOrderBy, desc: Boolean): [Metric]
}

"""An enumeration."""
enum MetricVersionStrColumns {
  DESCRIPTION
  DISPLAY_NAME
  HASH
  VALUE_FORMAT
}

"""An enumeration."""
enum MetricVersionOrderBy {
  PARAMS
  VIEWS
  METRIC_TYPE
  DISPLAY_NAME
  METADATA
  ORGANIZATION_ID
  SOURCE_DATA_SOURCE_VERSIONS
  DESCRIPTION
  ORG_DATA_SOURCE_ID
  HASH
  ID
  TIER
  MetricVersion_METRIC_ID
  MetricVersion_CREATED_AT
  MetricMetadata_METRIC_ID
  MetricMetadata_CREATED_AT
  UPDATED_AT
  IS_NEW
  EXTRA_FIELDS
  UPDATED_BY
  CREATED_BY
  VALUE_FORMAT
  TIER_LOCK
  DISPLAY_NAME_LOCK
  DESCRIPTION_LOCK
  VALUE_FORMAT_LOCK
}

"""An enumeration."""
enum SavedQueryStrColumns {
  TITLE
}

"""An enumeration."""
enum SavedQueryOrderBy {
  UPDATED_AT
  CREATED_BY
  DELETED_AT
  ORGANIZATION_ID
  CREATED_AT
  OWNER_TEAM_ID
  SERIALIZED_QUERY
  TITLE
  ID
}

"""An enumeration."""
enum TeamStrColumns {
  THEME
  DESCRIPTION
  SLUG
  NAME
}

"""An enumeration."""
enum TeamOrderBy {
  PRIMARY_DASHBOARD_ID
  UPDATED_AT
  VIEWS
  CREATED_BY
  THEME
  ORGANIZATION_ID
  SLUG
  NAME
  CREATED_AT
  FEATURED_METRIC_COLLECTION_ID
  DESCRIPTION
  DEACTIVATED_AT
  ID
}

"""An enumeration."""
enum UserStrColumns {
  EMAIL
  AVATAR_URL
  USER_NAME
  AUTH0_ID
}

"""An enumeration."""
enum UserOrderBy {
  EMAIL
  UPDATED_AT
  PRIMARY_DASHBOARD_ID
  USER_NAME
  ORGANIZATION_ID
  CREATED_AT
  AVATAR_URL
  DEACTIVATED_AT
  ID
  AUTH0_ID
}

"""An enumeration."""
enum MetricCollectionMetricOrderBy {
  UPDATED_AT
  EMPHASIS
  METRIC_COLLECTION_ID
  CREATED_AT
  METRIC_ID
  ID
  SAVED_QUERY_ID
  POSITION
}

type CollectionItem {
  id: ID!
  createdAt: DateTime!
  updatedAt: DateTime!
  metricCollectionId: Int!
  metricId: Int
  savedQueryId: Int
  position: Int!
  emphasis: Int!
  metricCollection: MetricCollection
  orgMetric: OrgMetric
  savedQuery: SavedQuery
  inCurrentModel: Boolean
  metric: Metric
}

type TeamView {
  id: ID!
  teamId: Int!
  userId: Int!
  organizationId: Int!
  createdAt: DateTime!
  organization: Organization
  team: Team
  user: User
}

"""An enumeration."""
enum MetricCollectionStrColumns {
  DESCRIPTION
  TITLE
  SLUG
}

"""An enumeration."""
enum MetricCollectionOrderBy {
  PRIMARY_DASHBOARD_ID
  UPDATED_AT
  VIEWS
  CREATED_BY
  DELETED_AT
  ORGANIZATION_ID
  SLUG
  CREATED_AT
  OWNER_TEAM_ID
  DESCRIPTION
  DEFAULT_EMPHASIS
  TITLE
  ID
}

type ApiKey {
  prefix: String!
  organizationId: Int!
  userId: Int!
  type: String!
  secretHash: String!
  createdAt: DateTime
  revokedAt: DateTime
  revokerId: Int
  lastUsedAt: DateTime
  scope: String
  user: User
  organization: Organization
  revoker: User
}

"""An enumeration."""
enum ApiKeyStrColumns {
  SCOPE
  SECRET_HASH
  PREFIX
  TYPE
}

"""An enumeration."""
enum ApiKeyOrderBy {
  REVOKED_AT
  SCOPE
  REVOKER_ID
  ORGANIZATION_ID
  LAST_USED_AT
  CREATED_AT
  USER_ID
  PREFIX
  TYPE
  SECRET_HASH
}

type Feature {
  id: ID!
  createdAt: DateTime
  updatedAt: DateTime
  name: String!
  retiredAt: DateTime
  organizations(searchStr: String, searchColumns: [OrganizationStrColumns], pageNumber: Int, pageSize: Int, orderBy: OrganizationOrderBy, desc: Boolean): [Organization]
  users(searchStr: String, searchColumns: [UserStrColumns], pageNumber: Int, pageSize: Int, orderBy: UserOrderBy, desc: Boolean): [User]
  totalOrganizations: Int
  totalUsers: Int
}

"""An enumeration."""
enum OrganizationStrColumns {
  MQL_SERVER_LOGS
  PRIMARY_CONFIG_BRANCH
  LOGO_URL
  NAME
  SOURCE_CONTROL_URL
  PRIMARY_CONFIG_REPO
}

"""An enumeration."""
enum OrganizationOrderBy {
  UPDATED_AT
  NAME
  CREATED_AT
  LOGO_URL
  PRIMARY_CONFIG_REPO
  SOURCE_CONTROL_URL
  IS_HOSTED
  TYPE
  PRIMARY_CONFIG_BRANCH
  DEACTIVATED_AT
  ID
  MQL_SERVER_LOGS
}

type OrgMqlServer {
  id: ID!
  organizationId: Int!
  createdAt: DateTime
  updatedAt: DateTime
  name: String!
  url: String!
  isOrgDefault: Boolean
  configSecret: String
  dwEngine: String
  heartbeats: [MqlHeartbeat]
  organization: Organization
  latestHeartbeat: MqlHeartbeat
}

type MqlHeartbeat {
  id: ID!
  organizationId: Int!
  userId: Int!
  createdAt: DateTime
  versionSha: String!
  status: String!
  details: JSONString
  mqlServerId: Int
  mqlServer: OrgMqlServer
  user: User
  org: Organization
}

"""An enumeration."""
enum OrgMqlServerStrColumns {
  DW_ENGINE
  NAME
  CONFIG_SECRET
  URL
}

"""An enumeration."""
enum OrgMqlServerOrderBy {
  UPDATED_AT
  DW_ENGINE
  IS_ORG_DEFAULT
  ORGANIZATION_ID
  NAME
  CREATED_AT
  URL
  CONFIG_SECRET
  ID
}

"""An enumeration."""
enum MetricTier {
  ONE
  TWO
  THREE
}

"""An enumeration."""
enum MetricType {
  MEASURE_PROXY
  RATIO
  EXPR
  CUMULATIVE
}

"""An enumeration."""
enum FeatureStrColumns {
  NAME
}

"""An enumeration."""
enum FeatureOrderBy {
  UPDATED_AT
  ID
  NAME
  CREATED_AT
  RETIRED_AT
}

"""Wrapper to contain queries related to transform settings & configs."""
type TransformConfig {
  auth0IdleSessionLifetimeHours: Int
  latestTermsOfService: TermsOfServiceVersion
}

type TermsOfServiceVersion {
  id: ID!
  pdfUrl: String!
  createdAt: DateTime!
}

"""
Base mutation object exposed by GraphQL.

Mutation names will be converted from snake_case to camelCase automatically
(e.g., log_mql_log will show up as logMqlLog in the GQL schema).
"""
type Mutation {
  revokeApiKeyTest(prefix: String!): ApiKey
  createOrganizationTest(name: String!, primaryConfigRepo: String, primaryConfigBranch: String, mqlServerUrl: String, sourceControlUrl: String, mqlServerLogs: String, isHosted: Boolean, dwEngine: String, mqlServerName: String, requireMfa: Boolean, allowMfaRememberBrowser: Boolean, allowedEmailDomains: [String]): Organization
  logMqlLog(level: String, message: String, tags: [String!]): LogMQLLogs
  setOrgMqlServerConfigSecret(clientConfigSecretId: String, mqlServerId: Int): SetOrgMqlServerConfigSecretId
  sendMqlHeartbeat(mqlServerId: Int, sha: String!): SendMqlHeartbeat
  createAnnotationTest(dateEndedAt: Date!, dateStartedAt: Date!, expectedImpact: String!, metricInputs: [GMetricAnnotationInput]!, priority: Priority!, text: String!, title: String!): CreateAnnotation
  updateAnnotationTest(annotationId: Int!, dateEndedAt: Date, dateStartedAt: Date, expectedImpact: String, metricInputs: [GMetricAnnotationInput], priority: Priority, text: String, title: String): UpdateAnnotation
  removeAnnotation(annotationId: Int!): RemoveAnnotation

  """
  Update user's email in DB and auth0. Auth0 needs to match for user to login with new email.
  """
  updateUserEmail(email: String!, userId: Int): UpdateUserEmail

  """
  Create API Key for given user. If no user_id passed, create key for authenticated user.
  """
  createApiKeyTest(userId: Int): CreateApiKey

  """
  Create User for given org. If no org_id passed, create user in org of authenticated user.
  """
  createUserTest(email: String!, isOrgOwner: Boolean, organizationId: Int, userName: String!): CreateUser

  """Add role to user in DB and Auth0."""
  addRoleToUserTest(role: String!, userId: Int!): AddRoleToUser

  """Remove role from user in DB and Auth0."""
  removeRoleFromUserTest(role: String!, userId: Int!): RemoveRoleFromUser

  """Deactivate user in DB and Auth0."""
  deactivateUserTest(userId: Int!): DeactivateUser

  """Reactivate user in DB and Auth0."""
  reactivateUserTest(userId: Int!): ReactivateUser

  """Update fields on a User."""
  updateUserTest(avatarUrl: String, email: String, id: ID!, primaryDashboardId: ID, userName: String): UpdateUser
  setUserPreference(prefKey: String!, prefValue: String!, userId: ID): SetUserPreference
  featuresCreate(name: String!): Feature
  featuresUpdate(id: ID!, name: String, retireFeature: Boolean): Feature
  featuresAddOrgs(featureId: ID!, organizationIds: [ID]!): Feature
  featuresAddUsers(featureId: ID!, userIds: [ID]!): Feature
  featuresRemoveAccess(featureId: ID!, userIds: [ID], organizationIds: [ID]): Feature
  questionsCreateReply(questionId: ID!, text: String!): Question
  questionRepliesLike(id: ID!): QuestionReply
  questionsLike(id: ID!): Question
  questionRepliesUnlike(id: ID!): QuestionReply
  questionsUnlike(id: ID!): Question
  questionsCreate(text: String!, priority: String!, metricId: ID!, directedToUsers: [ID], directedToTeams: [ID]): Question
  questionsDelete(id: ID!): Question
  questionsEdit(id: ID!, text: String, priority: String, directedToTeams: [ID], directedToUsers: [ID], resolved: Boolean): Question
  metricCollectionCreate(title: String!, description: String!, slug: String!, defaultEmphasis: Int!, metrics: [ID], savedQueries: [ID], ownerTeamId: ID): MetricCollection
  metricCollectionUpdate(id: ID!, title: String, primaryDashboardId: ID, description: String, slug: String, defaultEmphasis: Int, items: [MetricCollectionItem], ownerTeamId: ID): MetricCollection
  metricCollectionDelete(id: ID!): MetricCollection
  orgMqlServerUpdate(id: ID!, name: String, url: String, isOrgDefault: Boolean, configSecret: String, dwEngine: String): OrgMqlServer
  orgMqlServerDelete(id: ID!): OrgMqlServer
  orgMqlServerCreate(organizationId: ID, name: String!, url: String!, isOrgDefault: Boolean, configSecret: String, dwEngine: String): OrgMqlServer
  teamsCreate(name: String!, slug: String!, organizationId: ID, description: String, theme: String, regularMemberUserIds: [ID], teamAdminUserIds: [ID]): Team
  teamsUpdate(id: ID!, name: String, slug: String, description: String, theme: String, primaryDashboardId: Int, featuredMetricCollectionId: Int, deactivate: Boolean): Team
  teamsAddMember(teamId: ID!, regularMemberUserIds: [ID], teamAdminUserIds: [ID]): Team
  teamsRemoveMember(teamId: ID!, userId: ID!): Team
  teamSetMemberAdminStatus(teamMemberId: ID!, isTeamAdmin: Boolean!): Team
  teamsAssignAsMetricOwner(teamId: ID!, metricIds: [ID]): Team
  teamsRemoveAsMetricOwner(teamId: ID!, metricIds: [ID]): Team
  organizationsUpdate(id: ID!, name: String, logoUrl: String, primaryConfigRepo: String, primaryConfigBranch: String, sourceControlUrl: String, mqlServerLogs: String, isHosted: Boolean): Organization
  organizationsSetTierTooltip(organizationId: ID!, tooltip: String!, tier: MetricTier!): Organization
  organizationsSetMfaPrefs(organizationId: ID!, requireMfa: Boolean, allowMfaRememberBrowser: Boolean): Organization
  organizationsSetAllowedEmailDomains(organizationId: ID!, allowedEmailDomains: [String]!): Organization
  organizationsDelete(id: ID!): Organization
  metricsApprove(metricId: ID!): Metric
  metricsLogView(metricId: ID!): MetricView
  metricCollectionsLogView(metricCollectionId: ID!): MetricCollectionView
  teamsLogView(teamId: ID!): TeamView
  metricsAddUserOwners(metricId: ID!, userIds: [ID]): Metric
  metricsRemoveUserOwners(metricId: ID!, userIds: [ID]): Metric
  metricsAssignTeamOwners(metricId: ID!, teamIds: [ID]): Metric
  metricsRemoveTeamOwners(metricId: ID!, teamIds: [ID]): Metric
  metricsAddDescription(metricId: ID!, description: String!): Metric
  metricsUpdateMetadata(metricId: ID!, description: String, tier: Int, displayName: String, valueFormat: String, extraFields: JSONString): Metric
  savedQueryCreate(title: String!, serializedQuery: GenericScalar!, metricIds: [ID], ownerTeamId: ID): SavedQuery
  savedQueryUpdate(id: ID!, title: String, createdBy: Int, ownerTeamId: Int, serializedQuery: GenericScalar, metricIds: [ID]): SavedQuery
  savedQueryDeactivate(id: ID!): SavedQuery
  sendInvites(emails: [String]!, organizationId: ID): Organization
  acceptTermsOfService(userId: ID!, versionId: ID!): User
  createTermsOfService(pdfUrl: String!): TermsOfServiceVersion
}

type LogMQLLogs {
  ok: Boolean
}

type SetOrgMqlServerConfigSecretId {
  mqlServer: OrgMqlServer
}

type SendMqlHeartbeat {
  success: Boolean
  heartbeat: MqlHeartbeat
}

type CreateAnnotation {
  annotation: Annotation
}

input GMetricAnnotationInput {
  metricId: Int!
  dimensions: [GMetricAnnotationDimensionInput]
}

type UpdateAnnotation {
  annotation: Annotation
}

type RemoveAnnotation {
  ok: Boolean
}

"""
Update user's email in DB and auth0. Auth0 needs to match for user to login with new email.
"""
type UpdateUserEmail {
  user: User
}

"""
Create API Key for given user. If no user_id passed, create key for authenticated user.
"""
type CreateApiKey {
  createdKeyFullString: String
  createdKeyPrefix: String
}

"""
Create User for given org. If no org_id passed, create user in org of authenticated user.
"""
type CreateUser {
  user: User
}

"""Add role to user in DB and Auth0."""
type AddRoleToUser {
  user: User
}

"""Remove role from user in DB and Auth0."""
type RemoveRoleFromUser {
  user: User
}

"""Deactivate user in DB and Auth0."""
type DeactivateUser {
  user: User
}

"""Reactivate user in DB and Auth0."""
type ReactivateUser {
  user: User
}

"""Update fields on a User."""
type UpdateUser {
  user: User
}

type SetUserPreference {
  user: User
}

"""
Graphene input object for a metric collection item. Essentially a dataclass.
"""
input MetricCollectionItem {
  metricId: ID
  savedQueryId: ID
  emphasis: Int!
  position: Int!
}
